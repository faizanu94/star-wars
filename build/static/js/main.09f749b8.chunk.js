(this["webpackJsonpstar-wars"]=this["webpackJsonpstar-wars"]||[]).push([[0],{48:function(e,t,r){},49:function(e,t,r){},56:function(e,t,r){},57:function(e,t,r){},58:function(e,t,r){},59:function(e,t,r){},62:function(e,t,r){},63:function(e,t,r){"use strict";r.r(t);r(37),r(38);var s=r(0),n=r.n(s),a=r(19),c=r.n(a),o=r(6),i=r(7),l=r(9),d=r(8),p=r(11),u=r(31),h=r(1),j=function(){return Object(h.jsx)("div",{className:"launcher-body",children:Object(h.jsxs)("div",{className:"logo-container",children:[Object(h.jsx)("img",{className:"img-fluid",src:"/img/logo.png",alt:"logo"}),Object(h.jsx)("div",{className:"logo-text",children:Object(h.jsx)("h4",{children:"Loading .."})})]})})},b=function(e){return Object(h.jsx)("div",{className:"alert alert-danger",children:e.children})},f=r(16),v=(r(48),function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(){var e;Object(o.a)(this,r);for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={filterText:"",selectedIndex:0,showDropdown:!1},e.onKeyDown=function(t){var r=e.state.selectedIndex,s=13===t.keyCode,n=38===t.keyCode,a=40===t.keyCode;if(n||a||s){var c=e.getFilteredMovies();t.preventDefault(),n&&r>0?e.setState((function(e){return{selectedIndex:e.selectedIndex-1}})):a&&r<c.length-1?e.setState((function(e){return{selectedIndex:e.selectedIndex+1}})):s&&c[r]&&e.selectMovie(r)}},e.selectMovie=function(t){var r=e.getFilteredMovies()[t];if(r){e.setState({filterText:"",showDropdown:!1});var s=r.characters.filter((function(t){return!e.props.starwars.characters[t]}));s.length>0?e.props.fetchCharacters(s).then((function(){e.props.updateGender(""),e.props.updateSort({}),e.props.updateMovie(r)})):(e.props.updateGender(""),e.props.updateSort({}),e.props.updateMovie(r))}},e.hideDropdown=function(){e.setState({showDropdown:!1,filterText:""})},e.filterMovies=function(t){e.setState({filterText:t.target.value,selectedIndex:0})},e.toggleDropdown=function(){e.setState((function(e){return{showDropdown:!e.showDropdown}}))},e}return Object(i.a)(r,[{key:"getFilteredMovies",value:function(){var e=this;return this.state.filterText?this.props.movies.filter((function(t){var r=t.title.toLowerCase(),s=e.state.filterText.toLowerCase();return r.indexOf(s)>=0})):Object(f.a)(this.props.movies)}},{key:"renderMovies",value:function(){var e=this;return this.getFilteredMovies().map((function(t,r){return Object(h.jsx)("a",{href:"#/",onMouseDown:function(){return e.selectMovie(r)},children:Object(h.jsxs)("span",{className:"select-menu-item-text p-2",children:[t.title," (",t.release_date,")"]})},r)}))}},{key:"getMovieDropdown",value:function(){return Object(h.jsxs)("div",{className:"movie-select text-warning mt-2",children:[Object(h.jsx)("h4",{className:"text-warning text-center",children:"Search Movie"}),Object(h.jsx)("div",{className:"select-menu-filters",children:Object(h.jsx)("div",{className:"select-menu-text-filter",children:Object(h.jsx)("input",{type:"text",className:"form-control",placeholder:"Filter Movies",onBlur:this.hideDropdown,onChange:this.filterMovies,onKeyDown:this.onKeyDown})})}),Object(h.jsx)("div",{className:"select-menu-list",children:this.renderMovies()})]})}},{key:"render",value:function(){var e;return Object(h.jsxs)("div",{className:"movie-filter-wrap",children:[Object(h.jsxs)("button",{disabled:this.props.starwars.processing,onClick:this.toggleDropdown,className:"btn btn-warning",children:[Object(h.jsx)("i",{className:"fa fa-filter m-1"}),(null===(e=this.props.selectedMovie)||void 0===e?void 0:e.title)||"Movie"]}),this.state.showDropdown&&this.getMovieDropdown()]})}}]),r}(s.Component)),m=Object(p.b)((function(e){return{starwars:e.starwars}}))(v),O=function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"render",value:function(){return Object(h.jsx)(n.a.Fragment,{children:Object(h.jsx)(m,{movies:this.props.movies,selectedMovie:this.props.selectedMovie,updateMovie:this.props.updateMovie,updateGender:this.props.updateGender,updateSort:this.props.updateSort,fetchCharacters:this.props.fetchCharacters})})}}]),r}(s.Component),g=(r(49),function(){return Object(h.jsx)("div",{className:"loading-indicator",children:Object(h.jsx)("img",{src:"/img/spinner.jpg",alt:"spinner"})})}),x=(r(50),r(28)),w=r.n(x),y="UPDATE_MOVIE",N="UPDATE_GENDER",S="UPDATE_SORT",C=function(e){return function(t){t({type:N,payload:e})}},M=function(e){return function(t){t({type:S,payload:e})}},k=(r(56),function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(){var e;Object(o.a)(this,r);for(var s=arguments.length,n=new Array(s),a=0;a<s;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).state={showDropdown:!1,columns:[{name:"Name",selector:function(e){return e.name},sortable:!0},{name:"Gender",selector:function(e){return e.gender},sortable:!0},{name:"Height",selector:function(e){return e.height},sortable:!0}]},e.toggleDropdown=function(){e.setState((function(e){return{showDropdown:!e.showDropdown}}))},e.selectGender=function(t){e.setState({showDropdown:!1}),e.props.updateGender(t)},e}return Object(i.a)(r,[{key:"componentWillMount",value:function(){Object(x.createTheme)("solarized",{text:{primary:"#ffc107"},context:{background:"#cb4b16",text:"#FFFFFF"},divider:{default:"#000"}})}},{key:"renderMovie",value:function(){var e=this,t=this.props.movie.characters.map((function(t){return e.props.characters[t]}));this.props.preference.gender&&"All Genders"!==this.props.preference.gender&&(t=t.filter((function(t){return(null===t||void 0===t?void 0:t.gender)===e.props.preference.gender})));var r=t.filter((function(e){return!isNaN(null===e||void 0===e?void 0:e.height)})).reduce((function(e,t){return e+Number(null===t||void 0===t?void 0:t.height)}),0);return Object(h.jsxs)("div",{className:"col-12 list-item-container",children:[Object(h.jsxs)("div",{className:"list-item-body",children:[Object(h.jsxs)("div",{className:"movie-header",children:[Object(h.jsx)("h2",{children:Object(h.jsxs)("a",{className:"text-warning",href:this.props.movie.url,rel:"noopener noreferrer",target:"_blank",children:[Object(h.jsx)("span",{className:"text-warning",children:this.props.movie.title}),this.props.movie.name]})}),Object(h.jsxs)("p",{className:"meta text-dark small",children:["Produced by \xb7 ",Object(h.jsx)("b",{children:this.props.movie.producer})]})]}),Object(h.jsx)("div",{className:"movie-body",children:Object(h.jsx)("p",{className:"text-dark",children:this.props.movie.opening_crawl||"No description given."})}),Object(h.jsxs)("div",{className:"gender-filter-wrap",children:[Object(h.jsxs)("button",{onClick:this.toggleDropdown,className:"btn btn-warning",children:[Object(h.jsx)("i",{className:"fa fa-filter m-1"}),this.props.preference.gender||"Gender"]}),this.state.showDropdown&&this.getGenderDropdown()]}),Object(h.jsx)("h4",{className:"text-warning",children:"Characters"}),Object(h.jsx)(w.a,{columns:this.state.columns,data:t,defaultSortField:"name",theme:"solarized",customStyles:{headCells:{style:{fontSize:"22px"}}}}),Object(h.jsx)("table",{className:"table",children:Object(h.jsx)("tbody",{children:Object(h.jsxs)("tr",{children:[Object(h.jsxs)("td",{className:"text-warning",children:[Object(h.jsx)("b",{children:"Total number of characters:"})," ",t.length]}),Object(h.jsxs)("td",{className:"text-warning",children:[Object(h.jsx)("b",{children:"Sum of the heights of the characters:"})," ",r," cm (",.032808*r," ft / ",.3937*r," in)"]})]})})})]}),Object(h.jsx)("a",{href:this.props.movie.url,target:"_blank",rel:"noopener noreferrer",className:"author-link d-none d-lg-block d-xl-block d-md-block",children:Object(h.jsx)("img",{className:"author-img",src:"/img/logo.png",alt:this.props.movie.title})})]})}},{key:"getGenderDropdown",value:function(){var e=this,t=["All Genders"].concat(Object(f.a)(new Set(this.props.movie.characters.map((function(t){var r;return null===(r=e.props.characters[t])||void 0===r?void 0:r.gender})))));return Object(h.jsx)("div",{className:"gender-select text-warning mt-2",children:Object(h.jsx)("div",{className:"select-menu-list",children:t.map((function(t,r){return Object(h.jsx)("a",{href:"#/",onMouseDown:function(){return e.selectGender(t)},children:Object(h.jsx)("span",{className:"select-menu-item-text p-2",children:t})},r)}))})})}},{key:"render",value:function(){return Object(h.jsxs)("div",{className:"animate__animated animate__headShake"+(this.props.movie.title?"":" text-center"),children:[this.props.movie.title&&this.renderMovie(),!this.props.movie.title&&Object(h.jsx)("img",{className:"img-fluid logo",src:"/img/logo.png",alt:"logo"})]})}}]),r}(s.Component)),D={updateGender:C,updateSort:M},E=Object(p.b)((function(e){return{preference:e.preference,characters:e.starwars.characters}}),D)(k),_=(r(57),function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"render",value:function(){return Object(h.jsx)("div",{className:"movies-list",children:Object(h.jsx)("div",{className:"row list-container",children:Object(h.jsx)(E,{movie:this.props.preference.movie},this.props.preference.movie.episode_id)})})}}]),r}(s.Component)),F=Object(p.b)((function(e){return{preference:e.preference}}))(_),T=(r(58),function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"render",value:function(){return Object(h.jsx)("div",{className:"top-nav",children:Object(h.jsx)("div",{className:"container clearfix",children:Object(h.jsxs)("a",{href:"https://github.com/faizanu94/starwars",rel:"noopener noreferrer",target:"_blank",className:"logo clearfix float-left d-flex",children:[Object(h.jsx)("img",{className:"logo-img",src:"/img/logo.png",alt:"logo"}),Object(h.jsxs)("div",{className:"logo-text",children:[Object(h.jsx)("h4",{children:"Star Wars"}),Object(h.jsx)("p",{className:"text-dark d-inline-block",children:"Star Wars movies data fetched from https://swapi.dev/"})]})]})})})}}]),r}(s.Component)),G=r(20),A=r(4),I=r(66),H=r(67),R="PROCESS_FETCH_MOVIES",P="FETCH_MOVIES_SUCCESS",L="FETCH_MOVIES_FAILED",U="PROCESS_FETCH_CHARACTERS",z="FETCH_CHARACTERS_SUCCESS",J="FETCH_CHARACTERS_FAILED",V=(r(59),function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"componentDidMount",value:function(){0===this.props.starwars.movies.length&&this.props.fetchMovies()}},{key:"renderMovie",value:function(){return Object(h.jsx)(F,{movies:this.props.starwars.movies||[]})}},{key:"renderErrors",value:function(){if(!this.props.starwars.error)return null;var e="";switch(this.props.starwars.error.toLowerCase()){case"ajax error":e="Error trying to connect to server";break;default:e=this.props.starwars.error}return Object(h.jsx)(b,{type:"danger",children:e})}},{key:"renderAlerts",value:function(){var e=this.renderErrors();return e?Object(h.jsx)("div",{className:"alert-group",children:e}):null}},{key:"render",value:function(){return Object(h.jsxs)("div",{className:"page-wrap",children:[Object(h.jsx)(T,{}),this.renderAlerts(),Object(h.jsxs)("div",{className:"container mb-5 pb-4",children:[Object(h.jsx)("div",{className:"header-row clearfix",children:Object(h.jsx)("div",{className:"group-filters",children:this.props.starwars.movies&&0!==this.props.starwars.movies.length&&Object(h.jsx)(O,{movies:this.props.starwars.movies,selectedMovie:this.props.preference.movie,updateMovie:this.props.updateMovie,updateGender:this.props.updateGender,updateSort:this.props.updateSort,fetchCharacters:this.props.fetchCharacters})})}),Object(h.jsxs)("div",{className:"body-row",children:[this.props.starwars.processing&&Object(h.jsx)(g,{}),!this.props.starwars.processing&&this.renderMovie()]})]})]})}}]),r}(s.Component)),K={updateMovie:function(e){return function(t){t({type:y,payload:e})}},updateGender:C,updateSort:M,fetchMovies:function(){return function(e){e({type:R}),H.a.getJSON("".concat("https://swapi.dev/api/films/","?format=json")).subscribe((function(t){e({type:P,payload:{movies:t.results}})}),(function(t){e({type:L,payload:t.message})}))}},fetchCharacters:function(e){return function(t){return new Promise((function(r,s){t({type:U});var n=e.reduce((function(e,t){return Object(A.a)(Object(A.a)({},e),{},Object(G.a)({},t,H.a.getJSON("".concat(t,"?format=json"))))}),{});Object(I.a)(n).subscribe((function(e){t({type:z,payload:{characters:e}}),r()}),(function(e){t({type:J,payload:e.message}),s()}))}))}}},W=Object(p.b)((function(e){return{preference:e.preference,starwars:e.starwars}}),K)(V),B=r(12),q=r(29),Q=r(35),X=r.n(Q),Y=r(36),Z={movie:{},gender:"",sort:{}};var $={processing:!1,movies:[],characters:{},error:null};var ee=Object(B.b)({starwars:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(A.a)(Object(A.a)({},e),{},{processing:!0,error:null});case P:return Object(A.a)(Object(A.a)({},e),{},{movies:Object(f.a)(t.payload.movies),processing:!1,error:null});case U:return Object(A.a)(Object(A.a)({},e),{},{processing:!0,error:null});case z:return Object(A.a)(Object(A.a)({},e),{},{characters:Object(A.a)(Object(A.a)({},e.characters),t.payload.characters),processing:!1,error:null});case L:case J:return Object(A.a)(Object(A.a)({},e),{},{processing:!1,error:t.payload});default:return e}},preference:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(A.a)(Object(A.a)({},e),{},{movie:t.payload});case N:return Object(A.a)(Object(A.a)({},e),{},{gender:t.payload});case S:return Object(A.a)(Object(A.a)({},e),{},{sort:t.payload});default:return e}}}),te=Object(q.a)({key:"starwars:root",storage:X.a},ee),re=Object(B.c)(te,Object(B.a)(Y.a)),se=Object(q.b)(re),ne=function(e){Object(l.a)(r,e);var t=Object(d.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"render",value:function(){return Object(h.jsx)(p.a,{store:re,children:Object(h.jsx)(u.PersistGate,{loading:Object(h.jsx)(j,{}),persistor:se,children:Object(h.jsx)(W,{})})})}}]),r}(s.Component);r(62);c.a.render(Object(h.jsx)(ne,{}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.09f749b8.chunk.js.map